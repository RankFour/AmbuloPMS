<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css"
        integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="/css/fonts.css">
    <link rel="stylesheet" href="/css/paymentTenant.css">
    <link rel="stylesheet" href="/css/navigation.css">
    <title>Payment - Tenant</title>
</head>

<body>
    <div class="overlay" id="overlay"></div>
    <div id="sidebarContainer-tenant"></div>
    <div id="navbarContainer-tenant"></div>

    <!-- Main Content -->
    <div class="main-content">
        <div class="container">
            <!-- Rented Spaces -->
            <div class="card">
                <h2 class="section-title">
                    <i class="fas fa-building"></i>
                    Your Rented Spaces
                </h2>
                <div class="spaces-grid" id="spaces-grid">
                    <!-- Spaces will be loaded here -->
                </div>
            </div>

            <!-- Payment Breakdown -->
            <div class="card">
                <h2 class="section-title">
                    <i class="fas fa-calculator"></i>
                    Payment Breakdown
                </h2>
                <div id="breakdown-container">
                    <div class="alert error active" id="no-space-alert">
                        <i class="fas fa-info-circle"></i>
                        Please select a rental space above to view payment breakdown.
                    </div>
                </div>
            </div>

            <!-- Payment History -->
            <div class="card">
                <h2 class="section-title">
                    <i class="fas fa-history"></i>
                    Payment History
                </h2>
                <div class="payment-history">
                    <table id="payment-table">
                        <thead>
                            <tr>
                                <th><i class="fas fa-calendar"></i> Date</th>
                                <th><i class="fas fa-building"></i> Space</th>
                                <th><i class="fas fa-file-alt"></i> Description</th>
                                <th><i class="fas fa-peso-sign"></i> Amount</th>
                                <th><i class="fas fa-hashtag"></i> Reference</th>
                                <th><i class="fas fa-check-circle"></i> Status</th>
                            </tr>
                        </thead>
                        <tbody id="payment-tbody">
                            <!-- Payment history will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Payment Modal -->
    <div class="modal" id="payment-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">
                    <i class="fas fa-credit-card"></i>
                    Complete Your Payment
                </h2>
                <button class="close-btn" onclick="closePaymentModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <div class="alert success" id="modal-success-alert"></div>
            <div class="alert error" id="modal-error-alert"></div>

            <div class="payment-methods">
                <div class="payment-method">
                    <h3 class="method-title">
                        <i class="fas fa-mobile-alt"></i>
                        GCash Payment
                    </h3>
                    <div class="qr-code-modal">
                        <div class="qr-placeholder">
                            <div><i class="fas fa-qrcode" style="font-size: 24px; margin-bottom: 8px;"></i></div>
                            <div>Sample QR Code</div>
                            <div style="font-size: 12px; opacity: 0.8;">Scan with GCash App</div>
                        </div>
                    </div>
                    <div class="bank-details">
                        <div class="bank-detail-item">
                            <span class="bank-label">GCash Number:</span>
                            <span class="bank-value">
                                +63-917-123-4567
                                <button class="copy-btn" onclick="copyToClipboard('+639171234567')">
                                    <i class="fas fa-copy"></i>
                                </button>
                            </span>
                        </div>
                        <div class="bank-detail-item">
                            <span class="bank-label">Account Name:</span>
                            <span class="bank-value">Maria Santos</span>
                        </div>
                    </div>
                </div>

                <!-- <div class="payment-method">
                    <h3 class="method-title">
                        <i class="fas fa-university"></i>
                        Bank Transfer
                    </h3>
                    <div class="bank-details">
                        <div class="bank-detail-item">
                            <span class="bank-label">Bank:</span>
                            <span class="bank-value">BDO Unibank</span>
                        </div>
                        <div class="bank-detail-item">
                            <span class="bank-label">Account Number:</span>
                            <span class="bank-value">
                                1234-5678-9012-3456
                                <button class="copy-btn" onclick="copyToClipboard('1234567890123456')">
                                    <i class="fas fa-copy"></i>
                                </button>
                            </span>
                        </div>
                        <div class="bank-detail-item">
                            <span class="bank-label">Account Name:</span>
                            <span class="bank-value">Maria Santos</span>
                        </div>
                        <div class="bank-detail-item">
                            <span class="bank-label">Amount:</span>
                            <span class="bank-value" id="modal-amount">â‚±0.00</span>
                        </div>
                    </div>
                </div> -->
            </div>

            <div class="upload-section">
                <h3 class="upload-title">
                    <i class="fas fa-cloud-upload-alt"></i>
                    Upload Payment Confirmation
                </h3>
                <p class="upload-instructions">
                    After completing your payment, take a screenshot of the confirmation screen showing the reference
                    number.
                    Upload the image below to submit your payment proof to the administrator.
                </p>

                <div class="file-input-container">
                    <input type="file" id="payment-proof" class="file-input" accept="image/*"
                        onchange="handleFileUpload(event)">
                    <label for="payment-proof" class="file-input-label">
                        <i class="fas fa-cloud-upload-alt"></i>
                        Choose Screenshot
                    </label>
                </div>

                <div class="file-preview" id="file-preview">
                    <div class="preview-item">
                        <i class="fas fa-check-circle"></i>
                        <span id="file-name"></span>
                        <button class="copy-btn" onclick="removeFile()" style="margin-left: auto; color: #ef4444;">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>
            </div>

            <button class="submit-payment-btn" id="submit-payment-btn" onclick="submitPayment()" disabled>
                <i class="fas fa-paper-plane"></i>
                Submit Payment Confirmation
            </button>
        </div>
    </div>

    <script src="/javascript/paymentTenant.js"></script>
    <script>
        var user = null;
        try {
            user = JSON.parse(localStorage.getItem('user'));
        } catch (e) { }

        var userRole = (user && user.role) ? user.role.toUpperCase() : 'TENANT';

        if (userRole === 'ADMIN') {
            var script = document.createElement('script');
            script.src = '/javascript/navigationsAdmin.js';
            document.body.appendChild(script);
        } else {
            var script = document.createElement('script');
            script.src = '/javascript/navigationsTenant.js';
            document.body.appendChild(script);
        }
    </script>
</body>

</html>