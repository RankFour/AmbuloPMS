<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/css/sidebar.css">
    <link rel="stylesheet" href="/css/propertyAdmin.css">
    <title>Properties</title>
</head>

<body>
    <div class="overlay" id="overlay"></div>

    <div id="sidebarContainer"></div>

    <!-- Main Content -->
    <div class="main-content" id="mainContent">
        <div class="header">
            <div class="title-section">
                <div>
                    <h1>Hello, Kei!</h1>
                    <h2>Properties</h2>
                </div>
            </div>

            <div class="header-right">
                <div class="search-bar">
                    <input type="text" placeholder="Search Anything...">
                </div>
                <button class="icon notification">üîî</button>
                <button class="icon inbox">‚úâÔ∏è</button>
                <div class="profile-dropdown">
                    <button class="profile" id="profileBtnIcon">K</button>
                    <div class="dropdown-menu" id="dropdownMenu">
                        <a href="#" onclick="alert('Profile clicked')">üë§ Profile</a>
                        <a href="#" onclick="alert('Logout clicked')">üö™ Logout</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Property Management Module -->
        <div class="property-container">
            <div class="property-header">
                <div class="property-header-top">
                    <button class="new-ticket-btn" onclick="openAddModal()">
                        <i class="fas fa-plus me-2"></i>
                        Add Property
                    </button>

                    <div class="property-controls">
                        <div class="property-search-box">
                            <input type="text" placeholder="Search by name, location, or description" id="searchInput">
                            <div class="property-search-icon">
                                <i class="fas fa-search"></i>
                            </div>
                        </div>

                        <div class="property-dropdown">
                            <button class="property-dropdown-btn" onclick="toggleDropdown('statusDropdown')">
                                <i class="fas fa-filter me-2"></i>
                                Status
                                <i class="fas fa-chevron-down ms-2"></i>
                            </button>
                            <div class="property-dropdown-content" id="statusDropdown">
                                <a href="#" onclick="filterByStatus('all')"><i class="fas fa-list me-2"></i>All</a>
                                <a href="#" onclick="filterByStatus('available')"><i
                                        class="fas fa-check-circle me-2"></i>Available</a>
                                <a href="#" onclick="filterByStatus('occupied')"><i
                                        class="fas fa-user me-2"></i>Occupied</a>
                                <a href="#" onclick="filterByStatus('maintenance')"><i
                                        class="fas fa-tools me-2"></i>Maintenance</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="properties-grid" id="propertiesGrid">
                <!-- Properties will be rendered here by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Add Property Modal -->
    <div class="modal-overlay" id="addModal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">Add New Property</h2>
                <button class="close-btn" onclick="closeAddModal()">√ó</button>
            </div>
            <form id="addPropertyForm" onsubmit="addProperty(event)">
                <div class="modal-body">
                    <div class="form-group full-width">
                        <label class="form-label">Property Images</label>
                        <div class="image-upload-container" onclick="document.getElementById('imageInput').click()">
                            <div class="upload-icon">üìÅ</div>
                            <div class="upload-text">Click to upload images</div>
                            <div class="upload-hint">Or drag and drop files here (Max 5MB each)</div>
                        </div>
                        <input type="file" id="imageInput" name="property_image" accept="image/*" multiple
                            class="hidden" onchange="handleImageUpload(event)">
                        <div class="image-preview-container" id="imagePreviewContainer"></div>
                    </div>

                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">Property Name *</label>
                            <input type="text" class="form-input" name="property_name" required>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Floor Area (m¬≤) *</label>
                            <input type="number" step="0.01" class="form-input" name="floor_area_sqm" required>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Status *</label>
                            <select class="form-select" name="property_status" required>
                                <option value="Available">Available</option>
                                <option value="Occupied">Occupied</option>
                                <option value="Maintenance">Maintenance</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Monthly Rent (‚Ç±) *</label>
                            <input type="number" step="0.01" class="form-input" name="base_rent" required>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Property Taxes (Quarterly) *</label>
                            <input type="number" step="0.01" class="form-input" name="property_taxes_quarterly"
                                required>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Security Deposit (Months) *</label>
                            <input type="number" step="0.1" class="form-input" name="security_deposit_months" value="2"
                                required>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Minimum Lease Term (Months) *</label>
                            <input type="number" class="form-input" name="minimum_lease_term_months" value="12"
                                required>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Address ID</label>
                            <input type="text" class="form-input" name="address_id" placeholder="Leave empty for now">
                        </div>

                        <div class="form-group full-width">
                            <label class="form-label">Description</label>
                            <textarea class="form-textarea" name="description"
                                placeholder="Property description, amenities, etc."></textarea>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn-secondary" onclick="closeAddModal()">Cancel</button>
                    <button type="submit" class="btn-primary">Add Property</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Property Modal -->
    <div class="modal-overlay" id="editModal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">Edit Property</h2>
                <button class="close-btn" onclick="closeEditModal()">√ó</button>
            </div>
            <form id="editPropertyForm" onsubmit="updateProperty(event)">
                <div class="modal-body">
                    <div class="form-group full-width">
                        <label class="form-label">Property Images</label>
                        <div class="image-upload-container" onclick="document.getElementById('editImageInput').click()">
                            <div class="upload-icon">üìÅ</div>
                            <div class="upload-text">Click to upload images</div>
                            <div class="upload-hint">Or drag and drop files here (Max 5MB each)</div>
                        </div>
                        <input type="file" id="editImageInput" name="property_image" accept="image/*" multiple
                            class="hidden" onchange="handleEditImageUpload(event)">
                        <div class="image-preview-container" id="editImagePreviewContainer"></div>
                    </div>

                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">Property Name *</label>
                            <input type="text" class="form-input" name="property_name" id="editPropertyName" required>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Floor Area (m¬≤) *</label>
                            <input type="number" step="0.01" class="form-input" name="floor_area_sqm" id="editFloorArea"
                                required>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Status *</label>
                            <select class="form-select" name="property_status" id="editStatus" required>
                                <option value="Available">Available</option>
                                <option value="Occupied">Occupied</option>
                                <option value="Maintenance">Maintenance</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Monthly Rent (‚Ç±) *</label>
                            <input type="number" step="0.01" class="form-input" name="base_rent" id="editBaseRent"
                                required>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Property Taxes (Quarterly) *</label>
                            <input type="number" step="0.01" class="form-input" name="property_taxes_quarterly"
                                id="editPropertyTaxes" required>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Security Deposit (Months) *</label>
                            <input type="number" step="0.1" class="form-input" name="security_deposit_months"
                                id="editSecurityDeposit" required>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Minimum Lease Term (Months) *</label>
                            <input type="number" class="form-input" name="minimum_lease_term_months" id="editLeaseTerm"
                                required>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Address ID</label>
                            <input type="text" class="form-input" name="address_id" id="editAddressId"
                                placeholder="Leave empty for now">
                        </div>

                        <div class="form-group full-width">
                            <label class="form-label">Description</label>
                            <textarea class="form-textarea" name="description" id="editDescription"
                                placeholder="Property description, amenities, etc."></textarea>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn-secondary" onclick="closeEditModal()">Cancel</button>
                    <button type="submit" class="btn-primary">Update Property</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Property Details Modal -->
    <div class="modal-overlay" id="detailsModal">
        <div class="modal details-modal">
            <div class="modal-header">
                <h2 class="modal-title" id="detailsTitle">Property Details</h2>
                <button class="close-btn" onclick="closeDetailsModal()">√ó</button>
            </div>
            <div class="modal-body">
                <!-- Property Gallery -->
                <div class="property-gallery">
                    <button class="nav-arrow prev" onclick="changeDetailImage(-1)">‚Äπ</button>
                    <img id="detailMainImage" class="main-image"
                        src="https://images.unsplash.com/photo-1560518883-ce09059eeffa?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80"
                        alt="Property Main View">
                    <button class="nav-arrow next" onclick="changeDetailImage(1)">‚Ä∫</button>

                    <div class="thumbnail-row" id="detailThumbnails">
                        <!-- Thumbnails will be populated here -->
                    </div>
                </div>

                <!-- Property Details Container -->
                <div class="property-details-container">
                    <div class="details-left">
                        <!-- Specifications -->
                        <div class="property-section">
                            <div class="property-section-header">Property Specifications</div>
                            <div class="property-section-content" id="specificationsContent">
                                <!-- Content will be populated by JavaScript -->
                            </div>
                        </div>

                        <!-- Requirements -->
                        <div class="property-section">
                            <div class="property-section-header">Lease Information</div>
                            <div class="property-section-content">
                                <div class="spec-row">
                                    <span class="spec-label">Minimum Lease Term:</span>
                                    <span class="spec-value" id="detailLeaseTerm">12 months</span>
                                </div>
                                <div class="spec-row">
                                    <span class="spec-label">Security Deposit:</span>
                                    <span class="spec-value" id="detailSecurityDeposit">2 months</span>
                                </div>
                                <div class="spec-row">
                                    <span class="spec-label">Property Taxes:</span>
                                    <span class="spec-value" id="detailPropertyTaxes">‚Ç±5,000/quarter</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Right Sidebar -->
                    <div class="details-right">
                        <div class="price-section">
                            <div class="price-main" id="detailPrice">‚Ç±35,000</div>
                            <div class="price-sub">Monthly Rent</div>
                        </div>

                        <div class="deposit-info">
                            <strong>Security Deposit:</strong> <span id="detailDeposit">2 months deposit</span><br>
                            <small>Refundable upon lease termination, subject to property condition assessment.</small>
                        </div>

                        <div class="property-section">
                            <div class="property-section-header">Property Status</div>
                            <div class="property-section-content">
                                <div class="spec-row">
                                    <span class="spec-label">Occupancy:</span>
                                    <span class="spec-value"><span class="availability-status occupied"
                                            id="detailStatus">Available</span></span>
                                </div>
                                <div class="spec-row">
                                    <span class="spec-label">Last Updated:</span>
                                    <span class="spec-value" id="detailLastUpdated">Recently</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/javascript/propertyAdmin.js"></script>
    <script src="/javascript/sidebar.js"></script>
</body>

</html>