<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css"
    integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="/css/fonts.css">
  <link rel="stylesheet" href="/css/navigation.css">
  <link rel="stylesheet" href="/css/reports.css">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon/favicon-32x32.png">
  <title>Reports</title>
  <style>
    /* Minimal safe defaults if page CSS fails to load */
    .reports-container { padding: 16px; }
  </style>
</head>

<body>
  <div class="overlay" id="overlay"></div>

  <div id="sidebarContainer"></div>
  <div id="navbarContainer"></div>

  <div class="main-content" id="mainContent">
  <div class="reports-container">
    <div class="reports-header">
      <!-- Breadcrumb Navigation (matched style with maintenance.html) -->
      <div class="breadcrumb-container">
        <nav class="breadcrumb-nav">
          <a href="/adminDashboard.html">
            <i class="fas fa-home"></i> Dashboard
          </a>
          <span class="breadcrumb-separator">></span>
          <span class="breadcrumb-current">Reports</span>
        </nav>
      </div>

      <div class="filters">
        <div class="filter-group">
          <label for="fromDate"><i class="fas fa-calendar"></i> From</label>
          <input type="date" id="fromDate" />
        </div>
        <div class="filter-group">
          <label for="toDate"><i class="fas fa-calendar"></i> To</label>
          <input type="date" id="toDate" />
        </div>
        <div class="filter-group">
          <label for="propertySelect"><i class="fas fa-building"></i> Property</label>
          <select id="propertySelect">
            <option value="">All</option>
          </select>
        </div>
        <div class="filter-group tenant-only" id="tenantFilterGroup">
          <label for="tenantSelect"><i class="fas fa-user"></i> Tenant</label>
          <select id="tenantSelect">
            <option value="">All</option>
          </select>
        </div>
        <div class="filter-group groupby-only" id="groupByGroup">
          <label for="groupBy"><i class="fas fa-layer-group"></i> Group by</label>
          <select id="groupBy">
            <option value="month">Month</option>
            <option value="quarter">Quarter</option>
            <option value="year">Year</option>
          </select>
        </div>
        <div class="filter-actions">
          <button id="applyFiltersBtn" class="btn btn-primary"><i class="fas fa-filter me-1"></i> Apply</button>
          <button id="exportCsvBtn" class="btn btn-outline-secondary"><i class="fas fa-file-csv me-1"></i> Export CSV</button>
        </div>
      </div>
    </div>

    <div class="reports-tabs">
      <button class="tab-btn active" data-tab="financial"><i class="fas fa-peso-sign"></i> Financial</button>
      <button class="tab-btn" data-tab="tenants"><i class="fas fa-users"></i> Tenants</button>
      <button class="tab-btn" data-tab="properties"><i class="fas fa-file-contract"></i> Property & Lease</button>
      <button class="tab-btn" data-tab="maintenance"><i class="fas fa-tools"></i> Maintenance</button>
    </div>

    <div class="tab-content" id="tab-financial" style="display:block;">
      <div class="grid">
        <div class="card">
          <div class="card-header"><h3 class="card-title"><i class="fas fa-chart-line"></i>Total Collected by Period</h3></div>
          <div class="card-body" id="financialCollected"></div>
        </div>
        <div class="card">
          <div class="card-header"><h3 class="card-title"><i class="fas fa-exclamation-circle"></i>Outstanding Balances</h3></div>
          <div class="card-body kpi" id="financialOutstanding">—</div>
        </div>
        <div class="card">
          <div class="card-header"><h3 class="card-title"><i class="fas fa-vault"></i>Deposits Summary</h3></div>
          <div class="card-body" id="financialDeposits"></div>
        </div>
        <div class="card">
          <div class="card-header"><h3 class="card-title"><i class="fas fa-building"></i>Revenue per Property</h3></div>
          <div class="card-body" id="financialRevPerProperty"></div>
        </div>
        <div class="card">
          <div class="card-header"><h3 class="card-title"><i class="fas fa-repeat"></i>Recurring vs One-time</h3></div>
          <div class="card-body" id="financialRecurring"></div>
        </div>
      </div>
    </div>

    <div class="tab-content" id="tab-tenants">
      <div class="grid">
        <div class="card">
          <div class="card-header"><h3 class="card-title"><i class="fas fa-users"></i>Active vs Inactive</h3></div>
          <div class="card-body" id="tenantActiveInactive"></div>
        </div>
        <div class="card">
          <div class="card-header"><h3 class="card-title"><i class="fas fa-exclamation-triangle"></i>Tenants with Overdue</h3></div>
          <div class="card-body kpi" id="tenantOverdue">—</div>
        </div>
        <div class="card">
          <div class="card-header"><h3 class="card-title"><i class="fas fa-calendar-alt"></i>Average Tenure (months)</h3></div>
          <div class="card-body kpi" id="tenantAvgTenure">—</div>
        </div>
        <div class="card">
          <div class="card-header"><h3 class="card-title"><i class="fas fa-hourglass-half"></i>Upcoming Lease Expirations</h3></div>
          <div class="card-body kpi" id="tenantUpcomingExp">—</div>
        </div>
        <div class="card">
          <div class="card-header"><h3 class="card-title"><i class="fas fa-building"></i>Tenants by Property</h3></div>
          <div class="card-body" id="tenantByProperty"></div>
        </div>
      </div>
    </div>

    <div class="tab-content" id="tab-properties">
      <div class="grid">
        <div class="card">
          <div class="card-header"><h3 class="card-title"><i class="fas fa-door-open"></i>Occupancy per Property</h3></div>
          <div class="card-body" id="propOccupancy"></div>
        </div>
        <div class="card">
          <div class="card-header"><h3 class="card-title"><i class="fas fa-money-bill"></i>Average Rent per Property</h3></div>
          <div class="card-body" id="propAvgRent"></div>
        </div>
        <div class="card">
          <div class="card-header"><h3 class="card-title"><i class="fas fa-sync"></i>Renewals vs Terminations</h3></div>
          <div class="card-body" id="propRenewTerm"></div>
        </div>
        <div class="card">
          <div class="card-header"><h3 class="card-title"><i class="fas fa-file-contract"></i>Total Active Leases</h3></div>
          <div class="card-body kpi" id="propActiveLeases">—</div>
        </div>
        <div class="card">
          <div class="card-header"><h3 class="card-title"><i class="fas fa-bell"></i>Upcoming Vacancies</h3></div>
          <div class="card-body kpi" id="propUpcomingVac">—</div>
        </div>
      </div>
    </div>

    <div class="tab-content" id="tab-maintenance">
      <div class="grid">
        <div class="card">
          <div class="card-header"><h3 class="card-title"><i class="fas fa-chart-line"></i>Tickets by Month</h3></div>
          <div class="card-body" id="maintByMonth"></div>
        </div>
        <div class="card">
          <div class="card-header"><h3 class="card-title"><i class="fas fa-stream"></i>Tickets by Status</h3></div>
          <div class="card-body" id="maintByStatus"></div>
        </div>
        <div class="card">
          <div class="card-header"><h3 class="card-title"><i class="fas fa-hourglass"></i>Average Resolution (hrs)</h3></div>
          <div class="card-body kpi" id="maintAvgRes">—</div>
        </div>
        <div class="card">
          <div class="card-header"><h3 class="card-title"><i class="fas fa-list"></i>Common Issues</h3></div>
          <div class="card-body" id="maintCommon"></div>
        </div>
        <div class="card">
          <div class="card-header"><h3 class="card-title"><i class="fas fa-star"></i>Ratings</h3></div>
          <div class="card-body" id="maintRatings"></div>
        </div>
      </div>
    </div>

  </div>
  </div>

  <!-- Global Modal styles & structure (keeps navbar/sidebar behavior consistent) -->
  <link rel="stylesheet" href="/css/dialog-modal.css">
  <div class="modal-overlay" id="globalModal" aria-hidden="true">
    <div class="modal-container">
      <div class="modal-header">
        <h3 class="modal-title" id="modalTitle">Modal Title</h3>
        <button class="modal-close" onclick="Modal.close()" aria-label="Close">&times;</button>
      </div>
      <div class="modal-body" id="modalBody"></div>
      <div class="modal-footer" id="modalFooter"></div>
    </div>
  </div>

  <script src="/javascript/dialog-modal.js"></script>
  <script src="/javascript/utils/modalHelpers.js"></script>
  <script src="/constants/constants.js"></script>
  <script type="module" src="/javascript/reports.js"></script>
  <script src="/javascript/navigations.js"></script>
</body>

</html>